<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Completed Task History</title>
</head>
<body>
    <h1>Completed Tasks</h1>

    <!-- Filter Form -->
    <form method="get">
        <label for="month">Month:</label>
        <select name="month" id="month">
            {% for num, name in months %}
                <option value="{{ num }}" {% if num == selected_month %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
        </select>

        <label for="year">Year:</label>
        <select name="year" id="year">
            {% for y in years %}
                <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>{{ y }}</option>
            {% endfor %}
        </select>

        <label for="importance">Importance:</label>
        <select name="importance" id="importance">
            <option value="">All</option>
            {% for level in importance_levels %}
                <option value="{{ level }}" {% if level == selected_importance %}selected{% endif %}>{{ level }}</option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <ul>
        {% for task in completed_tasks %}
            <li>
                <strong>{{ task.title }}</strong> - {{ task.description }}
                <p>Completed on: {{ task.completed_date|date:"F j, Y, g:i a" }}</p>
                <p>Importance: {{ task.importance }}</p>
            </li>
        {% empty %}
            <li>No completed tasks available.</li>
        {% endfor %}
    </ul>

    <a href="{% url 'task_list' %}">Back to Task List</a>
</body>
</html>
